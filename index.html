<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Carta</title>
    <link rel="stylesheet" href="css/styles-index.css" />
  </head>
  <body>
    <div class="app" id="app">
      <!-- HOME (portada + botones de categorías) -->
      <section class="screen screen--home" id="viewHome" aria-hidden="false">
        <header class="homeCard">
          <div class="cover" id="cover">
            <img id="coverImg" alt="" />
            <div class="coverTop">
              <button class="pill" id="langBtn" type="button" aria-label="Idioma">
                <span id="langLabel">Español</span>
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 10l5 5 5-5"/></svg>
              </button>
              <button class="iconBtn" id="homeSearchBtn" type="button" aria-label="Buscar">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M10 18a8 8 0 1 1 5.293-14.293A8 8 0 0 1 10 18zm11 3-5.2-5.2"/></svg>
              </button>
            </div>
          </div>

          <div class="homeBody">
            <h1 class="placeTitle" id="placeTitle">Carta</h1>

            <div class="homeInfo" id="homeInfo">
              <button class="rowBtn" id="ratingBtn" type="button" aria-label="Valoracion" style="display:none;">
                <div class="rowIcon" aria-hidden="true">
                  <svg viewBox="0 0 24 24"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                </div>
                <div class="rowText">
                  <div class="rowPrimary" id="ratingPrimary"></div>
                  <div class="rowSecondary" id="ratingSecondary"></div>
                </div>
                <div class="rowChevron" aria-hidden="true">&#8250;</div>
              </button>

              <button class="rowBtn" id="infoBtn" type="button" aria-label="Info" style="display:none;">
                <div class="rowIcon" aria-hidden="true">
                  <svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2zm0 7a1.25 1.25 0 1 1 0-2.5A1.25 1.25 0 0 1 12 9zm2 9h-4v-2h1v-4h-1v-2h3v6h1v2z"/></svg>
                </div>
                <div class="rowText">
                  <div class="rowPrimary">Info</div>
                  <div class="rowSecondary" id="infoSecondary">WiFi, Telefono y Direccion</div>
                </div>
                <div class="rowChevron" aria-hidden="true">&#8250;</div>
              </button>
            </div>

            <div class="categoryButtons" id="homeCategories" aria-label="Categorias"></div>
          </div>
        </header>
      </section>

      <!-- CATEGORY VIEW (topbar + chips + lista de platos) -->
      <section class="screen screen--category" id="viewCategory" aria-hidden="true">
        <header class="topbar">
          <button class="iconBtn" id="backBtn" type="button" aria-label="Volver">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15 18 9 12l6-6"/></svg>
          </button>
          <div class="topbarTitle" id="categoryTitle">Categoria</div>
          <button class="iconBtn" id="catSearchBtn" type="button" aria-label="Buscar">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M10 18a8 8 0 1 1 5.293-14.293A8 8 0 0 1 10 18zm11 3-5.2-5.2"/></svg>
          </button>
        </header>

        <div class="chipsBar" aria-label="Subcategorias">
          <div class="chipsTrack" id="subcatChips"></div>
        </div>

        <main class="list" id="dishList" aria-live="polite">
          <div class="loading">Cargando...</div>
        </main>
      </section>

      <!-- BUSCADOR (overlay) -->
      <div class="searchOverlay" id="searchOverlay" aria-hidden="true">
        <div class="searchBox" role="dialog" aria-modal="true" aria-label="Buscar">
          <div class="searchField">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M10 18a8 8 0 1 1 5.293-14.293A8 8 0 0 1 10 18zm11 3-5.2-5.2"/></svg>
            <input id="searchInput" type="search" placeholder="Buscar" autocomplete="off" />
            <button class="iconBtn" id="clearSearch" type="button" aria-label="Borrar">&#10005;</button>
          </div>
          <button class="ghostBtn" id="closeSearch" type="button">Cerrar</button>
        </div>
        <button class="overlayBackdrop" type="button" id="searchBackdrop" aria-label="Cerrar"></button>
      </div>

      <!-- CTA inferior -->
      <button class="floatingCta" id="ctaBtn" type="button" style="display:none;">
        <span class="ctaIcon" aria-hidden="true">&#128172;</span>
        <span>Valora tu experiencia</span>
      </button>
    </div>

    <!-- MODAL PLATO (bottom sheet) -->
    <div class="sheet" id="dishSheet" aria-hidden="true">
      <button class="sheetBackdrop" type="button" data-close="true" aria-label="Cerrar"></button>
      <div class="sheetCard" role="dialog" aria-modal="true" aria-label="Detalle">
        <div class="sheetHandle" aria-hidden="true"></div>
        <div class="sheetImage" id="sheetImageWrap" style="display:none;">
          <img id="sheetImage" alt="" />
        </div>
        <div class="sheetBody">
          <div class="sheetTitle" id="sheetTitle"></div>
          <div class="sheetPrice" id="sheetPrice"></div>
          <div class="sheetDesc" id="sheetDesc"></div>
          <div class="sheetSection" id="sheetAllergenSection" style="display:none;">
            <div class="sheetSectionTitle">Alergenos</div>
            <div class="sheetAllergens" id="sheetAllergens"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL VALORACIONES (bottom sheet) -->
    <div class="sheet" id="ratingsSheet" aria-hidden="true">
      <button class="sheetBackdrop" type="button" data-close="true" aria-label="Cerrar"></button>
      <div class="sheetCard" role="dialog" aria-modal="true" aria-label="Valoraciones">
        <div class="sheetHandle" aria-hidden="true"></div>
        <div class="sheetBody">
          <div class="sheetHeader">
            <div class="sheetHeaderTitle">Valoraciones</div>
          </div>

          <div class="ratingsTop">
            <div class="ratingBig">
              <div class="ratingValue" id="ratingsValue">-</div>
              <div class="ratingStars" id="ratingsStars" aria-label="Estrellas"></div>
              <div class="ratingCount" id="ratingsCount"></div>
            </div>
            <div class="ratingBars" id="ratingsBars"></div>
          </div>

          <div class="sheetActions">
            <button class="primaryBtn" id="openReviewsBtn" type="button" style="display:none;">Ver en Google</button>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL INFO (bottom sheet) -->
    <div class="sheet" id="infoSheet" aria-hidden="true">
      <button class="sheetBackdrop" type="button" data-close="true" aria-label="Cerrar"></button>
      <div class="sheetCard" role="dialog" aria-modal="true" aria-label="Info">
        <div class="sheetHandle" aria-hidden="true"></div>
        <div class="sheetBody">
          <div class="sheetHeader">
            <div class="sheetHeaderTitle" id="infoTitle">Info</div>
          </div>

          <div class="mapWrap" id="mapWrap" style="display:none;">
            <iframe id="mapFrame" title="Mapa" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
          </div>

          <div class="infoRows" id="infoRows"></div>
        </div>
      </div>
    </div>

    <!-- ZOOM ALERGENO (overlay) -->
    <div class="zoomModal" id="allergenZoom" aria-hidden="true">
      <button class="zoomBackdrop" id="allergenZoomBackdrop" type="button" aria-label="Cerrar"></button>
      <div class="zoomCard" role="dialog" aria-modal="true" aria-label="Alérgeno">
        <button class="zoomClose" id="allergenZoomClose" type="button" aria-label="Cerrar">✕</button>
        <div class="zoomInner">
          <img id="allergenZoomImg" alt="Alérgeno" />
          <div class="zoomTitle" id="allergenZoomTitle"></div>
        </div>
      </div>
    </div>

    <script type="module" src="js/index.js"></script>
  </body>
</html>
